!function n(s,a,u){function l(t,e){if(!a[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=a[t]={exports:{}};s[t][0].call(r.exports,function(e){return l(s[t][1][e]||e)},r,r.exports,n,s,a,u)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function n(e,t,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"triggerWindowEvent",function(){o.recheckMode&&o.recheckMode()}),this.isRuntimeSite=t.isRuntimeSite,this.siteController=e.storage.siteController,this.mobileBreakPoint=991,this.builderApi=e;var r=!this.editor&&window.self!==window.top;this.resizeWaitTimeout=r?0:300,this.checkMobileMode=this.checkMobileMode.bind(this),this.setMobileMode=this.setMobileMode.bind(this),this.registerWindowEvent()}return function(e,t,i){t&&o(e.prototype,t),i&&o(e,i)}(n,[{key:"getRenderModel",value:function(){return{}}},{key:"afterRender",value:function(e,t){var i=this,o=t.querySelectorAll("*[data-dynamic-navigation-element]");if(o||o.length){t.classList.remove("mobile");var r=t.querySelector("*[data-dynamic-container-element]");this.builderApi.defer(function(){return i.checkMobileMode(t,o,r)}),this.builderApi.defer(function(){return i.setHeaderHeight(e,t)}),window.addEventListener("resize",function(){i.__resizeTimeout&&window.clearTimeout(i.__resizeTimeout),i.__resizeTimeout=window.setTimeout(function(){i.checkMobileMode(t,o,r)},i.resizeWaitTimeout)}),this.recheckMode=this.builderApi.debounce(function(){if("undefined"!=typeof document)for(var e=t;e&&e!==document.body;)e=e.parentElement;i.checkMobileMode(t,o,r)},300)}}},{key:"dispose",value:function(){this.recheckMode=null,this.unregisterWindowEvent()}},{key:"registerWindowEvent",value:function(){"undefined"!=typeof window&&(window._zoomUpdateEvents||(window._zoomUpdateEvents=[]),window._zoomUpdateEvents.push(this.triggerWindowEvent))}},{key:"unregisterWindowEvent",value:function(){if("undefined"!=typeof window&&window._zoomUpdateEvents){var e=window._zoomUpdateEvents.indexOf(this.triggerWindowEvent);0<=e&&window._zoomUpdateEvents.splice(e,1)}}},{key:"setHeaderHeight",value:function(e,t){if(!e.model.cover&&this.isRuntimeSite){var i=t.parentElement.querySelector(".header-container");if(i){var o=t.parentElement.querySelector(".kv-check-scroll");if(!o)return;var r=o.clientHeight,n=o.children[0].clientHeight,s=Math.max(r,n);i.style.minHeight="".concat(s,"px")}}}},{key:"getOuterWidth",value:function(e){var t=e.offsetWidth,i=window.getComputedStyle(e);return t+=parseInt(i.marginLeft)+parseInt(i.marginRight)}},{key:"checkMobileMode",value:function(e,t,i,o){var r=this,n=e.classList,s=(i||e).offsetWidth,a=0;if(t.forEach(function(e){a+=r.getOuterWidth(e)}),0<s){var u="undefined"!=typeof window&&window._zoomFactor?window._zoomFactor:1,l=e.offsetWidth<=this.mobileBreakPoint/u;!o&&!l&&n.contains("mobile")?(n.remove("mobile"),this.checkMobileMode(e,t,i,!0)):a<=s&&!l?this.setMobileMode(!1,n):(s<a||l)&&this.setMobileMode(!0,n)}}},{key:"setMobileMode",value:function(e,t){e?t.add("mobile"):t.remove("mobile")}},{key:"updateProperty",value:function(){}}]),n}();window.__features=window.__features||{},window.__features.navigation=r},{}]},{},[1]),function n(s,a,u){function l(t,e){if(!a[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=a[t]={exports:{}};s[t][0].call(r.exports,function(e){return l(s[t][1][e]||e)},r,r.exports,n,s,a,u)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,i){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.builderApi=e,this.localStorageHelper=this.builderApi.localStorageHelper,this.isTestMode=window.self!==window.top||!!e.editor,this.useLocalStorage=this.localStorageHelper.supportsLocalStorage&&!this.isTestMode,this.promoCodeClass="show-promo-code"}return function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(t,[{key:"validateForm",value:function(e){var r=this,n={data:[],errors:[]};return e.forEach(function(e){var t=e.getAttribute("id"),i=e.value,o=e.dataset.namelabel;if(!t.includes("g-recaptcha-response"))if("fieldSubscribe"===t&&(i="none"===e.style.display||e.checked),r.isEmpty(i))n.errors.push({key:t,errorMessage:"required"});else{if("fieldEmail"===t){if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(i).toLowerCase()))return void n.errors.push({key:t,errorMessage:"invalidEmail"})}n.data.push({name:o,field:t,value:i,type:r.mapInputType(t)})}}),n}},{key:"showSuccesMessage",value:function(e){var t=e.querySelector(".contact-form-success");t&&t.classList.add("show"),this.setButtonState(e.querySelector(".button.submit"),this.builderApi.localize("editorTemplates.features.subscription.sent")),e.classList.add(this.promoCodeClass)}},{key:"submitForm",value:function(e,o,t,r,i,n){var s=this,a=5<arguments.length&&void 0!==n?n:{},u=window._site&&window._site.siteId||"",l="/v1.0/contactform";100<=(window._site&&window._site.partnerId||0)&&(l="dev"===i.env.env||"latest"===i.env.env?"https://hostingapi.latest.mywebsitebuilder.com"+l:"qa"===i.env.env?"https://hostingapi.qa.mywebsitebuilder.com"+l:"uat"===i.env.env?"https://hostingapi.uat.mywebsitebuilder.com"+l:"https://hostingapi.mywebsitebuilder.com"+l);var c=o.querySelector("form"),d=o.querySelector(".hidden-form-data").dataset.sectionid,f={fields:e,site_id:u,recaptcha_code:t,section_id:d,form_id:d,is_subscription:!!o.querySelector('[data-type="subscribe"]')};this.setButtonState(r.target,this.builderApi.localize("editorTemplates.features.subscription.sending")),i.fetch(l,{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw new Error(e.statusText);var t=o.querySelector(".contact-form-success"),i=o.closest("section");t&&t.classList.add("show"),s.setButtonState(r.target,s.builderApi.localize("editorTemplates.features.subscription.sent")),c.reset(),a.promoCode?(s.useLocalStorage&&window.localStorage.setItem("showpromo",!0),i.classList.add(s.promoCodeClass)):t.addEventListener("click",function(){t.classList.remove("show")}),i.classList.add("submitted")}).catch(function(){s.setButtonState(r.target,s.builderApi.localize("editorTemplates.features.subscription.sendingError"))})}},{key:"clearErrors",value:function(e,t){var i=this,o=t.querySelector(".error-captcha-container");e&&e.length&&e.forEach(function(e){i.setErrorStyling(t.querySelector("."+e.id+"-container"),!1)}),o&&o.setAttribute("style","display: none")}},{key:"showErrors",value:function(e,t,i){var o=this;if(e&&e.length&&e.forEach(function(e){o.setErrorStyling(t.querySelector("."+e.key+"-container"),!0,e.errorMessage)}),!i){var r=t.querySelector(".error-captcha-container");if(r)r.setAttribute("style","display: block");else{var n=t.querySelector(".captcha-field-wrapper"),s=document.createElement("div");s.className="error-captcha-container",s.innerHTML=this.builderApi.localize("editorTemplates.features.subscription.couldNotVerify"),n.appendChild(s)}}}},{key:"isEmpty",value:function(e){return null==e||"object"===o(e)&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length}},{key:"tryRenderCaptcha",value:function(e,t){var i=this;if(!window.hasCaptcha){window.captchaInstanceQueue=[],window.onCaptchaLoadCallback=function(){window.captchaInstanceQueue.forEach(function(e){i.renderCaptcha(e,t)})};var o=document.createElement("script");o.src="https://www.google.com/recaptcha/api.js?onload=onCaptchaLoadCallback",o.setAttribute("async",!0),o.setAttribute("defer",!0),document.body.appendChild(o),window.hasCaptcha=!0}window.grecaptcha?this.renderCaptcha(e,t):window.captchaInstanceQueue.push(e)}},{key:"renderCaptcha",value:function(e,t){var i=e.querySelector(".captcha-field-wrapper");if(window.grecaptcha&&i&&!i.querySelector("iframe")){i.innerHTML="";var o=window.grecaptcha.render(i,{sitekey:"6Lewpm8UAAAAAKlR7x35yQOUTW6uJ65zbm96VqiL",callback:window.onCaptchaSubmit});t._captchaWidgetId=o}}},{key:"validateCaptcha",value:function(e,t){return window.grecaptcha?window.grecaptcha&&window.grecaptcha.getResponse(e._captchaWidgetId):(this.tryRenderCaptcha(t,e),!1)}},{key:"setErrorStyling",value:function(e,t,i){if(e){var o=e.querySelector("input")||e.querySelector("textarea"),r=e.querySelector(".error-container");o&&r&&(t&&o?(o.style.cssText="border: 3px solid #F44336; border-radius: .25rem; box-sizing: border-box; outline: 0;",r.innerHTML=this.builderApi.localize("editorTemplates.features.subscription.".concat(i||"required"))):(o.style.cssText="",r.innerHTML=""))}}},{key:"setButtonState",value:function(e,t){e&&(e.innerHTML=t)}},{key:"mapInputType",value:function(e){var t=1;return"fieldEmail"===e&&(t=3),"fieldDate"===e&&(t=4),"fieldPhone"===e&&(t=6),"fieldFirstName"!==e&&"fieldlastName"!==e||(t=8),t}}]),t}();window.__features=window.__features||{},window.__features["form-core"]=n},{}]},{},[1]),function n(s,a,u){function l(t,e){if(!a[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=a[t]={exports:{}};s[t][0].call(r.exports,function(e){return l(s[t][1][e]||e)},r,r.exports,n,s,a,u)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function o(e,t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.builderApi=e,this.formCore=i["form-core"],this.isForPreview=e.isForPreview,this.isRuntimeSite=!e.editor}return function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(o,[{key:"initializeForSection",value:function(){}},{key:"updateProperty",value:function(){}},{key:"afterRender",value:function(e,t){var i=this,o=t.querySelector('form [data-type="button"]'),r=e.controller.parentController;this.isForPreview||this.isRuntimeSite&&o&&(o.removeAttribute("href"),o.dataset.href="",o.addEventListener("click",function(e){i.handleFormSubmission(e,r,t)}),t.addEventListener("click",function(){i.formCore.tryRenderCaptcha(t,r)}))}},{key:"handleFormSubmission",value:function(e,t,i){if(e.preventDefault(),"localhost"!==window.location.hostname){var o=i.querySelectorAll("input, textarea");this.formCore.clearErrors(o,i);var r=this.formCore.validateForm(o),n=r.data,s=r.errors,a=this.formCore.validateCaptcha(t,i);0<s.length||!a?this.formCore.showErrors(s,i,a):this.formCore.submitForm(n,i,a,e,this.builderApi,t.model.binding)}}}]),o}();window.__features=window.__features||{},window.__features.subscription=o},{}]},{},[1]),function n(s,a,u){function l(t,e){if(!a[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=a[t]={exports:{}};s[t][0].call(r.exports,function(e){return l(s[t][1][e]||e)},r,r.exports,n,s,a,u)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=function(){function o(e,t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n(this,"getUniqueId",function(){return i.builderApi.getPageUri()+"-"+i.view.id}),n(this,"hasShownPopover",function(){return!!i.useLocalStorage&&window.localStorage.getItem(i.getUniqueId())}),this.builderApi=e,this.model=e.controller.model,this.editMode=!!e.editor,this.viewerMode=!this.editMode,this.view=t.view,this.isTestMode=window.self!==window.top||!!e.editor,this.viewerMode&&this.model.showPopover&&(this.inPopoverMode=!0),this.editorContext=e.controller.editorContext,this.editMode&&this.setTooltip(),this.localStorageHelper=this.builderApi.localStorageHelper,this.useLocalStorage=this.localStorageHelper.supportsLocalStorage&&!this.isTestMode}return function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(o,[{key:"dispose",value:function(){}},{key:"getDisplayTime",value:function(e){return 1e3*parseInt(e.popoverTiming)||0}},{key:"rerender",value:function(){this.view.requestRender()}},{key:"setTooltip",value:function(){void 0===this.model.popoverTiming&&(this.model.popoverTiming=10);var e="";this.model.showPopover&&(e="leaveSite"===this.model.popoverDisplay?this.builderApi.localize("editorTemplates.features.popover.tooltip.leaveSite"):0<parseInt(this.model.popoverTiming)?this.builderApi.localize("editorTemplates.features.popover.tooltip.afterX").replace("{time}",this.model.popoverTiming):this.builderApi.localize("editorTemplates.features.popover.tooltip.immediately")),this.editorContext.setSectionToolTip(this.builderApi.controller.parentController,e)}},{key:"showModal",value:function(t){var i=this;this.builderApi.showModal({fullScreen:!0,content:t,closeButton:t.querySelector(".feature-modal-close-button"),onClose:this.model.promoCode?function(e){i.nextSectionElement.parentElement.insertBefore(t,i.nextSectionElement),t.classList.remove("popover-mode")}:null}),this.mouseLeaveListener&&document.body.removeEventListener("mouseleave",this.mouseLeaveListener),this.localStorageHelper.supportsLocalStorage&&!this.isTestMode&&window.localStorage.setItem(this.getUniqueId(),!0)}},{key:"initializeForSection",value:function(e,t){var i=this;if(this.inPopoverMode){var o=e.domElement.parentElement.parentElement;if(this.nextSectionElement=o.nextElementSibling,this.hasShownPopover())this.hasShownPopover()&&t.promoCode?this.useLocalStorage&&window.localStorage.getItem("showpromo")?this.view.features.subscription.formCore.showSuccesMessage(o):o.style.display="none":this.hasShownPopover()&&(o.style.display="none");else if(o.classList.add("popover-mode"),"leaveSite"===t.popoverDisplay)setTimeout(function(){i.mouseLeaveListener=function(){return i.showModal(o)},i.listener=document.body.addEventListener("mouseleave",i.mouseLeaveListener)},3e3);else{var r=this.getDisplayTime(t);setTimeout(function(){i.showModal(o)},r)}}}},{key:"updateProperty",value:function(e,t,i){return console.log("updateProperty",e,t,i),this.setTooltip(),!1}},{key:"getRenderModel",value:function(){}},{key:"afterRender",value:function(){}}]),o}();window.__features=window.__features||{},window.__features.popover=o},{}]},{},[1]),window._featureSettings={navigation:{settings:{}},"form-core":{settings:{}},translations:{"editorTemplates.features.subscription.couldNotVerify":"Could not verify if you were human","editorTemplates.features.subscription.sent":"Sent!","editorTemplates.features.subscription.sending":"Sending ...","editorTemplates.features.subscription.sendingError":"Error sending form","editorTemplates.features.subscription.required":"This field is required.","editorTemplates.features.subscription.subscribe":"By submitting your information, you are granting us permission to email you. You may unsubscribe at any time.","editorTemplates.features.subscription.subscribeToggle":"By checking this box and submitting your information, you are granting us permission to email you. You may unsubscribe at any time."},subscription:{settings:{dependingGlobalFeatures:["form-core"]}},popover:{settings:{}}};